
<div class="spaceship-banner" style="background-image: url('<%= cl_image_path(@spaceship.image, :crop => :fill) %>');">
  <p data-controller= "booking" id="booking-message-good">
    <%= @message %>
  </p>
</div>

<div class="container">

  <div class="row">


    <div class="col-12 col-md-9">
      <div class="spaceship-presentation">
        <h2><%= @spaceship.name %></h2>
        <p>Capacity: <%= @spaceship.capacity %></p>

        <h3>Description</h3>
        <p><%= @spaceship.description %></p>

        <h3>Address</h3>
        <p><%= @spaceship.address %></p>
        <div
          id="map"
          style="width: 100%;
          height: 300px;"
          data-markers="<%= @markers.to_json %>"
          data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>
          <h3>Pictures</h3>
          <p>TO DO</p>
          <%= link_to "Back", root_path, class: "btn btn-main" %>
          <% if policy(@spaceship).edit? %>
            <%= link_to "Edit", edit_user_spaceship_path(current_user, @spaceship), class: "btn btn-main" %>
            <%= link_to "Delete", user_spaceship_path(current_user, @spaceship), method: :delete,
              data: { confirm: "Are you sure?" }, class: "btn btn-main" %>
          <% end %>
       </div>
    </div>

    <div class="booking-form calendar col-12 col-md-3" id="booking-form-ship">
      <% if user_signed_in? %>
        <%= simple_form_for([current_user, @spaceship, Booking.new]) do |f| %>
          <%= f.input :start_date, as: :date, html5: true  %>
          <%= f.input :end_date, as: :date, html5: true  %>
          <%= f.button :submit, class: "btn btn-main" %>
        <% end %>
      <% end %>
    </div>

    <div id = "reviews">
      <% @reviews.each do |review| %>
        <p>Name: <%= review.booking.user.first_name %> <%= review.booking.user.last_name %></p>
        <p>content: <%= review.content %> </p>
        <p>rating:
          <% review.rating.times do %>
            <i class="fas fa-star" id="reviews-full-stars"></i>
          <% end %>
          <% (5 - review.rating).times do %>
            <i class="far fa-star"></i>
          <% end %>
      <% end %>
    </div>
  </div>
</div>

